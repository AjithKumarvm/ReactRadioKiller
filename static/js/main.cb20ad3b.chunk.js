(window.webpackJsonpplayer=window.webpackJsonpplayer||[]).push([[0],{19:function(t,e,a){t.exports=a(37)},29:function(t,e,a){},30:function(t,e,a){},31:function(t,e,a){},32:function(t,e,a){},33:function(t,e,a){},34:function(t,e,a){},35:function(t,e,a){},36:function(t,e,a){},37:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(9),i=a.n(o),s=a(10),l=a(6),c=(a(29),a(1)),p=a(2),u=a(4),y=a(3),d=a(5),m=a(38),f=(a(30),a(11));function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}var S=function(t){return{type:"UPDATE_PLAYLIST",list:t.list.map((function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(a,!0).forEach((function(e){Object(f.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},t,{index:e})}))}},v=function(t){return{type:"UPDATE_USER_INTENT",intent:t.intent}},E=(a(31),a(32),function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(r)))).state={show:!1},a}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidUpdate",value:function(t){var e="PLAYING"===this.props.playerStatus;e!==this.state.show&&this.setState({show:e})}},{key:"render",value:function(){return["playListTriangle"].push(this.state.show?"play":"stop"),r.a.createElement(m.a,{in:this.state.show&&this.props.current,timeout:300,className:"playListTriangle"},r.a.createElement("div",null))}}]),e}(r.a.Component)),L=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(r)))).checkIfPlaying=function(t){var e=a.props.playerStatus;return a.props.currentStation.id===t&&("PLAYING"===e||"BUFFERING"===e)},a.checkIfSelected=function(t){return a.props.currentStation.id===t},a.playListClick=function(t){return function(){a.player.play(t)(),a.props.updateUserIntent("PLAY")}},a}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.props.getPlayList(),this.player=this.props.getPlayer()}},{key:"componentDidUpdate",value:function(t){!t.currentStation&&this.props.playList.length&&this.player.play()({autoPlay:!0})}},{key:"render",value:function(){var t=this;return this.props.playListLoader?r.a.createElement("div",{className:"playList hideScroll"},r.a.createElement("div",{className:"list placeholder selected active"}),r.a.createElement("div",{className:"list placeholder selected"}),r.a.createElement("div",{className:"list placeholder selected"}),r.a.createElement("div",{className:"list placeholder selected"}),r.a.createElement("div",{className:"list placeholder selected"}),r.a.createElement("div",{className:"list placeholder selected"}),r.a.createElement("div",{className:"list placeholder selected"})):r.a.createElement("div",{className:"playList hideScroll"},this.props.playList.map((function(e){var a=["list"];return t.checkIfSelected(e.id)&&a.push("selected"),r.a.createElement("div",{className:a.join(" "),key:e.id,onClick:t.playListClick(e)},r.a.createElement(E,{playerStatus:t.props.playerStatus,current:t.checkIfSelected(e.id),selected:t.checkIfSelected(e.id)}),e.title," ",r.a.createElement("div",{className:"lang"},e.genre.slice(0,3)))})))}}]),e}(r.a.PureComponent),I=Object(l.b)((function(t){return{playList:t.playList,playListLoader:t.playListLoader,currentStation:t.currentStation,playerStatus:t.playerStatus}}),(function(t){return{getPlayList:function(){fetch("https://ajithkumarvm.github.io/radiokiller/playlist.json").then((function(t){return t.json()})).then((function(e){t(S({list:e.music}))})).catch((function(t){console.error("api failed",t)}))},updateUserIntent:function(e){return t(v({intent:e}))}}}))(L),g=0,O=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(r)))).updateIndicator=function(){"PLAYING"!==a.props.playerStatus&&"PLAY"===a.props.userIntent&&window.navigator.onLine&&setTimeout((function(){return a.play()({retry:!0})}),1e3),a.props.updateIndicator()},a.onStatus=function(t){return function(e){"PLAYING"===t&&e&&e.timeStamp&&(g=e.timeStamp,localStorage.setItem("currentStationId",a.props.currentStation.id)),a.props.onStatus(t)(e)}},a.play=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{retry:!1,autoPlay:!1};e.retry&&a.onStatus("WAITING")(),a.onStatus("PAUSE")();var n=a.refs.player;if(e.autoPlay&&localStorage.getItem("currentStationId")){var r=localStorage.getItem("currentStationId"),o=a.props.playList.filter((function(t){return t.id===r}));o.length&&(t=o[0])}t=t||a.props.currentStation,n.src=t.source,n.onloadedmetadata=a.onMeta,n.onaudioprocess=a.audioProcess,n.onplay=a.onStatus("PLAY"),n.onplaying=a.onStatus("PLAYING"),n.onpause=a.onStatus("PAUSE"),n.onwaiting=a.onStatus("WAITING"),n.onstalled=a.onStatus("STALLED"),n.onerror=a.onStatus("ERROR"),n.ontimeupdate=a.props.onTimeUpdate;try{n.play().catch(a.onError)}catch(i){console.error("player",i),a.onError(i)}a.props.setStation({station:t})}},a.onError=function(t){a.onStatus("ERROR")()},a.pause=function(){a.refs.player.pause()},a}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.player=this.refs.player,window.addEventListener("online",this.updateIndicator),window.addEventListener("offline",this.props.updateIndicator)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("online",this.props.updateIndicator),window.removeEventListener("offline",this.props.updateIndicator)}},{key:"render",value:function(){return r.a.createElement("audio",{ref:"player"})}}]),e}(r.a.PureComponent),b=Object(l.b)((function(t){return{playerStatus:t.playerStatus,playerTime:t.playerTime,currentStation:t.currentStation,playList:t.playList,userIntent:t.userIntent}}),(function(t){return{setStation:function(e){t({type:"SET_STATION",station:e.station})},onStatus:function(e){return function(a){t({type:"UPDATE_PLAYER_STATUS",status:{status:e}.status})}},onTimeUpdate:function(e){var a=e.timeStamp;t(function(t){return{type:"UPDATE_PLAYER_TIME",timeStamp:t.timeStamp}}({timeStamp:a-g}))},updateIndicator:function(){t({type:"UPDATE_ONLINE_STATUS",status:{status:navigator.onLine}.status})}}}),null,{forwardRef:!0})(O),P=(a(33),a(34),a(35),function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(y.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this.props.currentStation||{},e=t.image,a=t.title;return r.a.createElement("div",{className:"playerMeta"},r.a.createElement("div",{className:"icon",style:{backgroundImage:"url(".concat(e,")")}}),r.a.createElement("div",{className:"stationName"},a))}}]),e}(r.a.PureComponent)),N=(a(36),function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(y.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.now=Date.now()}},{key:"render",value:function(){if("PLAYING"!==this.props.playerStatus)return null;var t=parseInt(this.props.playerTime/1e3),e="0".concat(t%60);e=e.slice(-2);var a="0".concat(parseInt(t/60));a=a.slice(-2);var n=" ".concat(a,":").concat(e);return r.a.createElement("div",{className:"PlayerTimer"},n)}}]),e}(r.a.PureComponent)),j=function(t){function e(){var t,a,n=this;Object(c.a)(this,e);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(i)))).action=function(){"PLAYING"===a.props.playerStatus||"WAITING"===a.props.playerStatus?(a.player.pause(),a.props.updateUserIntent("PAUSE")):(a.player.play()(),a.props.updateUserIntent("PLAY"))},a.playerIcon=function(){return"PLAYING"===a.props.playerStatus?r.a.createElement("div",{className:"playStopControls stop"}):"PAUSE"===a.props.playerStatus?r.a.createElement("div",{className:"playStopControls play"}):"STALLED"===a.props.playerStatus||"ERROR"===a.props.playerStatus?r.a.createElement("div",{className:"playStopControls stalled"}):r.a.createElement("div",{className:"playStopControls buffer"})},a.changeTrack=function(t){return function(){var e=a.props.playList[0];e="NEXT"===t?a.props.currentStationIndex===a.props.playList.length-1?a.props.playList[0]:a.props.playList[a.props.currentStationIndex+1]:0===a.props.currentStationIndex?a.props.playList[a.props.playList.length-1]:a.props.playList[a.props.currentStationIndex-1],a.props.updateUserIntent("PLAY"),a.player.play(e)()}},a.prevNextIcon=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"triangle"}),r.a.createElement("div",{className:"bar"}))},a.prev=function(){return"INITIALISING"===a.props.playerStatus?null:r.a.createElement("div",{className:"actions prev prevNextControl",onClick:a.changeTrack("PREV")},r.a.createElement(n.prevNextIcon,null))},a.next=function(){return"INITIALISING"===a.props.playerStatus?null:r.a.createElement("div",{className:"actions next prevNextControl",onClick:a.changeTrack("NEXT")},r.a.createElement(n.prevNextIcon,null))},a}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.player=this.props.getPlayer()}},{key:"render",value:function(){var t=["innerWrapper"];!this.props.playListLoader&&t.push("anim");var e=["playerControls"];return!this.props.playListLoader&&e.push("controlAnim"),r.a.createElement("div",{className:e.join(" ")},r.a.createElement("div",{className:t.join(" ")},!this.props.playListLoader&&r.a.createElement(P,{currentStation:this.props.currentStation}),!this.props.playListLoader&&r.a.createElement(this.prev,null),r.a.createElement("div",{className:"actions",onClick:this.action},r.a.createElement(this.playerIcon,null)),!this.props.playListLoader&&r.a.createElement(this.next,null),r.a.createElement(N,{playerTime:this.props.playerTime,playerStatus:this.props.playerStatus})))}}]),e}(r.a.PureComponent),T=Object(l.b)((function(t){var e=t.playerStatus,a=t.playList,n=t.currentStation,r=t.playListLoader,o=t.playerTime,i=t.onlineStatus,s=t.userIntent;return{playerStatus:e,playList:a,currentStationIndex:n?n.index:0,currentStation:n,playListLoader:r,playerTime:o,onlineStatus:i,userIntent:s}}),(function(t){return{updateUserIntent:function(e){return t(v({intent:e}))}}}))(j),A=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(u.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(o)))).state={show:!1},a.player=r.a.createRef(),a.play=function(t){a.player.current.play(t)()},a.getPlayer=function(){return a.player.current},a.offlineMessage=function(){return a.props.onlineStatus?null:r.a.createElement("div",{className:"offlineMessage"},"YOU ARE OFFLINE, MUSIC WILL RESUME WHEN YOU ARE ONLINE")},a}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.setState({show:!0})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.props.onlineStatus?"":"offline"},r.a.createElement("h1",{className:"colored"},"RADIO KILLER"),r.a.createElement(m.a,{in:this.state.show,timeout:300,classNames:"rkAnim"},r.a.createElement("div",{className:"rkContainer"},r.a.createElement(b,{ref:this.player}),r.a.createElement(I,{play:this.play,getPlayer:this.getPlayer}),r.a.createElement(T,{getPlayer:this.getPlayer})))),r.a.createElement("div",{className:"playLink"},r.a.createElement("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=com.vilvan.android.radiokiller&utm_source=radiokillerpage&pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"},r.a.createElement("img",{alt:"Get it on Google Play",height:"60",src:"https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png"}))),r.a.createElement(this.offlineMessage,null))}}]),e}(r.a.PureComponent),w=Object(l.b)((function(t){return{onlineStatus:t.onlineStatus}}))(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function U(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?k(a,!0).forEach((function(e){Object(f.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var D={playerStatus:"INITIALISING",playListLoader:!0,playList:[],currentStation:null,onlineStatus:navigator.onLine,userIntent:"PLAY"},_=Object(s.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_PLAYER_STATUS":return U({},t,{playerStatus:e.status});case"UPDATE_PLAYLIST":return U({},t,{playList:e.list,playListLoader:!1,currentStation:e.list[0]});case"UPDATE_PLAYER_TIME":return U({},t,{playerTime:e.timeStamp});case"SET_STATION":return U({},t,{currentStation:e.station});case"UPDATE_ONLINE_STATUS":return U({},t,{onlineStatus:e.status});case"UPDATE_USER_INTENT":return U({},t,{userIntent:e.intent});default:return t}}));i.a.render(r.a.createElement(l.a,{store:_},r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.cb20ad3b.chunk.js.map